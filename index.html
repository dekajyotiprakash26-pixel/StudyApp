<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Study App</title>

<style>
body{
  font-family: Georgia, serif;
  background:#F4E3C8;
  color:#4b3a2f;
  padding:20px;
}

h1{
  text-align:center;
}

.subject{
  background:#F4E3C8;
  border:1px solid #d8c7b0;
  border-radius:8px;
  padding:16px;
  margin-bottom:12px;
  font-size:18px;
  box-shadow:0 2px 4px rgba(0,0,0,0.1);
  cursor:pointer;
}

.subject.completed{
  border:2px solid #4caf50;
}

.subject a{
  text-decoration:none;
  color:#3b2a20;
  font-weight:bold;
}

.meta{
  margin-top:8px;
  font-size:14px;
  color:#6b5647;
}

button{
  margin-top:8px;
  margin-right:6px;
  background:#e8d6bd;
  border:1px solid #c8b49a;
  padding:4px 8px;
  border-radius:4px;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ðŸ“š My Subjects</h1>

<div class="subject" data-id="assam1" onclick="openPage('assam-history-part1/index.html')">
  <a href="assam-history-part1/index.html">Assam History Part 1</a>
  <div class="meta" id="date-assam1">Last revised: â€”</div>
  <button onclick="markDone('assam1', event)">Done</button>
  <button onclick="resetDone('assam1', event)">Reset</button>
</div>

<div class="subject" data-id="assam2" onclick="openPage('assam-history-part2/index.html')">
  <a href="assam-history-part2/index.html">Assam History Part 2</a>
  <div class="meta" id="date-assam2">Last revised: â€”</div>
  <button onclick="markDone('assam2', event)">Done</button>
  <button onclick="resetDone('assam2', event)">Reset</button>
</div>

<script>
const KEY_PROGRESS = "study_progress";
let progress = JSON.parse(localStorage.getItem(KEY_PROGRESS)) || {};

function openPage(url){
  window.location.href = url;
}

function markDone(id, e){
  e.stopPropagation();   // critical line
  let today = new Date().toLocaleDateString();
  progress[id] = today;
  localStorage.setItem(KEY_PROGRESS, JSON.stringify(progress));
  applyUI();
}

function resetDone(id, e){
  e.stopPropagation();   // critical line
  delete progress[id];
  localStorage.setItem(KEY_PROGRESS, JSON.stringify(progress));
  applyUI();
}

function applyUI(){
  document.querySelectorAll(".subject").forEach(box=>{
    let id = box.dataset.id;
    let dateBox = document.getElementById("date-"+id);

    if(progress[id]){
      box.classList.add("completed");
      dateBox.innerText = "Last revised: " + progress[id];
    }else{
      box.classList.remove("completed");
      dateBox.innerText = "Last revised: â€”";
    }
  });
}

applyUI();
</script>

</body>
</html>
